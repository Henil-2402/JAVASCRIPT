<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <input type="text" placeholder="Enter uid" name="uid">
    <input type="text" placeholder="Enter Task" name="task">
    <input type="date" name="dl">

    <button onclick="add()">ADD</button>
    <button onclick="upd()" style="display: none;">Update</button>

    <h3>Active Tasks</h3>
    <table id="activeTasks">
    </table>

    <h3>Completed Tasks</h3>
    <table id="completedTasks">
    </table>

    <script>
        let a = []  // Array to hold active tasks
        let completed = []  // Array to hold completed tasks
        let ipr = document.getElementsByTagName("input")
        let btn = document.getElementsByTagName("button")
        let activeTbl = document.getElementById("activeTasks")
        let completedTbl = document.getElementById("completedTasks")
        let ind = -1

        // Function to display both active and completed tasks
        let disp = () => {
            let activeRows = ""
            let completedRows = ""

            if (a.length > 0) {
                activeRows = "<tr><th>SNo</th><th>USER ID</th><th>TASK</th><th>Deadline</th></tr>"
                for (let i = 0; i < a.length; i++) {
                    activeRows += `<tr><td>${i + 1}</td><td>${a[i].uid}</td><td>${a[i].task}</td><td>${a[i].dl}</td>
                    <td><button onclick="edit(${i})">EDIT</button></td>
                    <td><button onclick="del(${i})">DELETE</button></td>
                    <td><button onclick="com(${i})">COMPLETE</button></td></tr>`
                }
            }
            activeTbl.innerHTML = activeRows

            if (completed.length > 0) {
                completedRows = "<tr><th>SNo</th><th>USER ID</th><th>TASK</th><th>Deadline</th></tr>"
                for (let i = 0; i < completed.length; i++) {
                    completedRows += `<tr><td>${i + 1}</td><td>${completed[i].uid}</td><td>${completed[i].task}</td><td>${completed[i].dl}</td></tr>`
                }
            }
            completedTbl.innerHTML = completedRows
        }

        // Function to add a new task
        let add = () => {
            let obj = {}
            for (let i = 0; i < ipr.length; i++) {
                obj = { ...obj, [ipr[i].name]: ipr[i].value }
                ipr[i].value = ""
            }
            a.push(obj)
            disp()
        }

        // Function to delete a task
        function del(ind) {
            a.splice(ind, 1)
            disp()
        }

        // Function to edit a task
        function edit(i) {
            ipr[0].value = a[i].uid
            ipr[1].value = a[i].task
            ipr[2].value = a[i].dl
            btn[0].style.display = "none"
            btn[1].style.display = "inline-block"
            ind = i
        }

        // Function to update an edited task
        function upd() {
            let obj = {}
            for (let i = 0; i < ipr.length; i++) {
                obj = { ...obj, [ipr[i].name]: ipr[i].value }
                ipr[i].value = ""
            }
            a[ind] = obj
            disp()
            btn[0].style.display = "inline-block"
            btn[1].style.display = "none"
        }

        // Function to mark a task as complete
        function com(i) {
            // Move the task to the completed array
            completed.push(a[i])

            // Remove the task from the active tasks array
            a.splice(i, 1)

            disp()
        }
    </script>
</body>
</html>
